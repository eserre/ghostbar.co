<!DOCTYPE HTML><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content=IE-edge><meta name=description content=""><meta name=viewport content="width=device-width, initial-scale=1"><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/img/favicon-apple-57x57.png><link rel=apple-touch-icon sizes=72x72 href=/img/favicon-apple-72x72.png><link rel=apple-touch-icon sizes=114x114 href=/img/favicon-apple-114x114.png><link href="//fonts.googleapis.com/css?family=Source+Code+Pro:300|Lato:300,300italic" rel=stylesheet type=text/css><link rel=stylesheet href=/css/main.8cbe.css><script src=/js/head-scripts.d41d.js></script><title>vim: clipboard support without x &mdash; ghostbar</title></head><body><header id=header class=container><div class=row><div id=logo class=twocol><a href="/"><img src=/img/logo-128x128.b4c1.png></a></div><!-- end of #logo --><div id=title class=sixcol><h1><a href="/">ghostbar</a></h1><p id=tagline>Random thoughts on technology</p></div><!-- end of #title --><div id=menu class=twocol><ul><li><a href=/archive.html>Archive</a></li><li><a href=https://twitter.com/ghostbar>Twitter</a></li><li><a href=https://github.com/ghostbar>GitHub</a></li><li><a href=https://diasp.org/people/3002f1a079ac0132b39800259069449e>Diaspora*</a></li><li><a href=/keys>PGP keys</a></li></ul></div><!-- end of #menu --></div><!-- end of .row --><div class=clearfix></div></header><!-- end of #header.container --><div id=post class=container><div class="row container"><article class="twelvecol post"><header><h1>vim: clipboard support without x</h1><div class=date><time datetime=2014-06-30T11:59:32-05:00 pubdate="">June 30, 2014</time></div></header><div class=content><p>On my Linux computers I have used <code>xclip</code> for having clipboard support for some years but never got it to run in my servers because they do not have X server and you need one for the clipboard, always got a:</p><pre><code>xclip: Error: Can't open display: (null)
</code></pre><p>So I had to do a workaround and the easiest thing to do was using a temporary file:</p><div class=highlight><pre><code class=vim><span class=k>if</span> system<span class=p>(</span><span class=s2>&quot;echo $DISPLAY&quot;</span><span class=p>)</span> <span class=p>=~</span> <span class=s2>&quot;&quot;</span>
  vmap <span class=p>&lt;</span>C<span class=p>-</span><span class=k>c</span><span class=p>&gt;</span> <span class=k>y</span>: <span class=k>call</span> system<span class=p>(</span><span class=s2>&quot;&gt; /tmp/theClipboardWithoutX&quot;</span><span class=p>,</span> getreg<span class=p>(</span><span class=s2>&quot;\&quot;&quot;</span><span class=p>))&lt;</span>CR<span class=p>&gt;</span>
  map <span class=p>&lt;</span>C<span class=p>-</span><span class=k>v</span><span class=p>&gt;</span> :<span class=k>call</span> setreg<span class=p>(</span><span class=s2>&quot;\&quot;&quot;</span><span class=p>,</span> system<span class=p>(</span><span class=s2>&quot;&lt; /tmp/theClipboardWithoutX&quot;</span><span class=p>))&lt;</span>CR<span class=p>&gt;</span><span class=k>p</span>
<span class=k>else</span>
  vmap <span class=p>&lt;</span>C<span class=p>-</span><span class=k>c</span><span class=p>&gt;</span> <span class=k>y</span>: <span class=k>call</span> system<span class=p>(</span><span class=s2>&quot;xclip -i -selection clipboard&quot;</span><span class=p>,</span> getreg<span class=p>(</span><span class=s2>&quot;\&quot;&quot;</span><span class=p>))&lt;</span>CR<span class=p>&gt;</span>
  map <span class=p>&lt;</span>C<span class=p>-</span><span class=k>v</span><span class=p>&gt;</span> :<span class=k>call</span> setreg<span class=p>(</span><span class=s2>&quot;\&quot;&quot;</span><span class=p>,</span>system<span class=p>(</span><span class=s2>&quot;xclip -o -selection clipboard&quot;</span><span class=p>))&lt;</span>CR<span class=p>&gt;</span><span class=k>p</span>
<span class=k>endif</span>
</code></pre></div><p>Basically: if there's no <code>$DISPLAY</code> set then send the copied selection to the file <code>/tmp/theClipboardWithoutX</code> with the keybinds Ctrl+C and with Ctrl+V you get the data inside that file. If there's <code>$DISPLAY</code> then use <code>xclip</code>.</p><p>Surprisely it works very well.</p><p>Check <a href=https://github.com/ghostbar/dotvim/blob/master/vim/rc/copy-n-paste.vim>my full <code>vimrc</code> for copy and paste stuff (has configs for Mac as well)</a> and if you want, the full <a href=https://github.com/ghostbar/dotvim>vimfiles repo</a> may come handy as well.</p></div><footer><small><em>Any comment goes best to my twitter <a href=http://twitter.com/ghostbar>here</a></em>.</small></footer></article></div><!-- end .row --></div><!-- end .container --><script src=/js/script.d16b.js></script><!-- Google Analytics: change UA-XXXXX-X to be your site's ID. --><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-1022716-2');ga('send','pageview');</script><div class=clearfix></div><footer id=footer class=container><div class=row><div class="twelvecol last"><small>Â© 2012-2014, Jose Luis Rivas. Built with <a href=http://jekyllrb.com>Jekyll</a> by <a href=http://joseluisrivas.net>Jose Luis Rivas</a>.</small> <small class=pull-right><a href=/feed.xml>RSS</a></small></div><!-- end of .twelvecol --></div><!-- end of .row --></footer></body></html>