<!DOCTYPE HTML><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content=IE-edge><meta name=description content=""><meta name=viewport content="width=device-width, initial-scale=1"><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/img/favicon-apple-57x57.png><link rel=apple-touch-icon sizes=72x72 href=/img/favicon-apple-72x72.png><link rel=apple-touch-icon sizes=114x114 href=/img/favicon-apple-114x114.png><link href="//fonts.googleapis.com/css?family=Source+Code+Pro:300|Lato:300,300italic" rel=stylesheet type=text/css><link rel=stylesheet href=/css/main.8cbe.css><script src=/js/head-scripts.d41d.js></script><title>Homepage &mdash; ghostbar</title></head><body><header id=header class=container><div class=row><div id=logo class=twocol><a href="/"><img src=/img/logo-128x128.b4c1.png></a></div><!-- end of #logo --><div id=title class=sixcol><h1><a href="/">ghostbar</a></h1><p id=tagline>Random thoughts on technology</p></div><!-- end of #title --><div id=menu class=twocol><ul><li><a href=/archive.html>Archive</a></li><li><a href=https://twitter.com/ghostbar>Twitter</a></li><li><a href=https://github.com/ghostbar>GitHub</a></li><li><a href=/keys>GPG Keys</a></li></ul></div><!-- end of #menu --></div><!-- end of .row --><div class=clearfix></div></header><!-- end of #header.container --><div id=first-post class=container><div class="row container"><article class=twelvecol><header><h1><a href=/2014/12/08/dont-trust-on-file-uploads-with-postman>Don't trust on file uploads with postman</a></h1><div class=date>December 08, 2014</div></header><div class=content><p>I have been using postman for quite a while to test requests into my day-job API, so I was confident it worked pretty nice and it was definitely very easy to use. I just saved the requests and it even handled cookies for me.</p><p>Then I had to test files. Since it worked pretty nice on the other requests I were doing, including <code>form-data</code>, <code>urlencoded</code> or <code>multipart</code> then when files upload failed the first thing that came to my mind was «<em>shit, I couldn't get streams to work</em>» and «<em>hapi is broken</em>» (I'm using <a href="http://hapijs.com/"><code>hapi</code></a>), even worst: <a href=https://github.com/pkgcloud/pkgcloud><code>pkgcloud</code></a> doesn't takes streams. As a result, I ended up debugging for hours streams on <code>pkgcloud</code> and changed implementations, then checked upstreams on <code>hapi</code> and saw there was on <code>.on('data', fn)</code> being called but <code>.on('readable')</code> and <code>.on('end')</code>.</p><p>«<em>Empty streams!</em>» I said, «<em>of course, <code>hapi</code> is wrong and it's not reading the file I'm sending!</em>». Oh boy, I was so wrong. I even filled a bug asking if the streams implementation was broken.</p><p>Then I decided to give it a try with <code>curl</code> and <strong>boom</strong>: worked.</p><p>«<em>OK, <code>curl</code> must be corrupted, will try with <code>wget</code></em>», of course, <em><code>curl</code> must be corrupted</em>; seems legit, right? So <code>wget</code> was <em>corrupted</em> as well it seemed, because that was working too.</p><p>Lesson: do not trust on postman. When I started writing it I was thinking <em>don't trust postman for file uploads</em> but now, after revisiting all it took to debug such a simple thing it's better a <em>don't trust postman at all</em>.</p></div></article></div><!-- end for .row --></div><!-- end for #first-post.container --><div id=featured-posts class=container><div class=row><article class=container><header><h1><a href=/2014/12/06/did-you-got-a-ssl-from-godaddy-g2-and-is-not-trusted>Did you got a SSL certificate from GoDaddy, was issued by GoDaddy G2 and now you have issues of non-valid/not-trusted certificate?</a></h1><div class=date>December 06, 2014</div></header><div class=content><p>After we bought a certificate with GoDaddy (which BTW, wasn't my idea) it got signed by their CA GoDaddy - G2, which turns out is not trusted by <code>nodejs</code>, nor by safari on iOS.</p><p>The certificate comes with a file called <code>gd_bundle.crt</code> which I thought it would be enough since it's the one being sent by GoDaddy to be added into the chain, so I made the <code>cat gd_bundle.crt &gt;&gt; my_cert.crt</code>. What's the surprise? That's only G2 CA bundle, not G1 which is widely trusted, the path wasn't there.</p><p>Obviously part of the solution, then, was going to <a href="https://certs.godaddy.com/repository/">GoDaddy's cert repo</a> and try one by one the probable solutions. To avoid making you lose time on it: the file to download is called <code>gd_bundle-g2-g1.crt</code> and is under the <em>GoDaddy Certificate Chain</em> title. If you're using NGINX (like me) you need to concatenate that file to the certificate given to you by GoDaddy, that means the conent of <code>gd_bundle-g2-g1.crt</code> must go <strong>after</strong> the content of your certificate in order to get the chain right, so the command should look like:</p><pre><code>cat gd_bundle-g2-g1.crt &gt;&gt; your-certificate.crt
</code></pre><p>Now you got a fully trusted certificate.</p></div></article><article class=container><header><h1><a href=/2014/10/13/irssi-and-tmux-refresh-screen>Irssi and Tmux having refresh issues, quick work-around</a></h1><div class=date>October 13, 2014</div></header><div class=content><pre><code>TERM=screen irssi
</code></pre><p>I had this same issue with <code>htop</code> and <code>tmux</code> and this was the solution. It seems it's an issue with the 256-color support or something.</p><p>So there you go, if you're using the latests <code>irssi</code> and see only half of the screen refreshes (or just the last line) then this workaround will solve it for you.</p><p>I put it on my aliases list like:</p><pre><code>alias irssi='TERM=screen irssi'
</code></pre><p>And done.</p></div></article></div><!-- end for .row --></div><!-- end for #featured-posts.container --><div id=next-10-posts class=container><div class=row><section class=twelvecol><h1>More posts</h1><ul><li><h2><span class=date>June 30, 2014</span> <a href=/2014/06/30/vim-clipboard-support-without-x>vim: clipboard support without x</a><h2></h2></h2></li><li><h2><span class=date>June 16, 2014</span> <a href=/2014/06/16/angular-zxcvbn-v1.0.0>angular-zxcvbn v1.0.0</a><h2></h2></h2></li><li><h2><span class=date>May 30, 2014</span> <a href=/2014/05/30/why-my-gpg-does-not-support-hkps>Why my gpg does not support hkps?</a><h2></h2></h2></li><li><h2><span class=date>May 23, 2014</span> <a href=/2014/05/23/parserss-v0.0.1>parserss v0.0.1</a><h2></h2></h2></li><li><h2><span class=date>May 18, 2014</span> <a href=/2014/05/18/framework-challenge-bogodev>Framework Challenge Bogodev 2014</a><h2></h2></h2></li><li><h2><span class=date>May 16, 2014</span> <a href=/2014/05/16/using-angular-file-uploader-together-with-angular-file-model>Using angular-file-uploader and angular-file-model together</a><h2></h2></h2></li><li><h2><span class=date>May 14, 2014</span> <a href=/2014/05/14/transloadit-api-v1.0.0-rc1>transloadit-api v1.0.0-rc1</a><h2></h2></h2></li><li><h2><span class=date>May 14, 2014</span> <a href=/2014/05/14/transloadit-api-v1.0.0-rc1-es>transloadit-api v1.0.0-rc1</a><h2></h2></h2></li><li><h2><span class=date>May 13, 2014</span> <a href=/2014/05/13/angular-geocomplete>angular-geocomplete's first version</a><h2></h2></h2></li><li><h2><span class=date>May 13, 2014</span> <a href=/2014/05/13/angular-geocomplete-es>Primera versión de angular-geocomplete</a><h2></h2></h2></li></ul><a class=read-more href=/archive.html>See the archive for more posts</a></section></div><!-- end for .row --></div><!-- end for .container --><script src=/js/script.d16b.js></script><!-- Google Analytics: change UA-XXXXX-X to be your site's ID. --><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-1022716-2');ga('send','pageview');</script><div class=clearfix></div><footer id=footer class=container><div class=row><div class="twelvecol last"><small>© 2012-2014, Jose Luis Rivas. Built with <a href=http://jekyllrb.com>Jekyll</a> by <a href=http://joseluisrivas.net>Jose Luis Rivas</a>.</small> <small class=pull-right><a href=/feed.xml>RSS</a></small></div><!-- end of .twelvecol --></div><!-- end of .row --></footer></body></html>