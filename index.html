<!DOCTYPE HTML><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content=IE-edge><meta name=description content=""><meta name=viewport content="width=device-width, initial-scale=1"><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/img/favicon-apple-57x57.png><link rel=apple-touch-icon sizes=72x72 href=/img/favicon-apple-72x72.png><link rel=apple-touch-icon sizes=114x114 href=/img/favicon-apple-114x114.png><link href="//fonts.googleapis.com/css?family=Source+Code+Pro:300|Lato:300,300italic" rel=stylesheet type=text/css><link rel=stylesheet href=/css/main.9c3d.css><script src=/js/head-scripts.d41d.js></script><title>Homepage &mdash; ghostbar</title></head><body><header id=header class=container><div class=row><div id=logo class=twocol><a href="/"><img src=/img/logo-128x128.b4c1.png></a></div><!-- end of #logo --><div id=title class=sixcol><h1><a href="/">ghostbar</a></h1><p id=tagline>Random thoughts on technology</p></div><!-- end of #title --><div id=menu class=twocol><ul><li><a href=/archive.html>Archive</a></li><li><a href=https://twitter.com/ghostbar>Twitter</a></li><li><a href=https://github.com/ghostbar>GitHub</a></li><li><a href=https://diasp.org/people/3002f1a079ac0132b39800259069449e>Diaspora*</a></li><li><a href=/keys>PGP&OTR keys</a></li></ul></div><!-- end of #menu --></div><!-- end of .row --><div class=clearfix></div></header><!-- end of #header.container --><div id=first-post class=container><div class="row container"><article class=twelvecol><header><h1><a href=/2016/01/04/wwhw-js-timeouts>WWHW: a timeout id is saved on an array</a></h1><div class=date>January 04, 2016</div></header><div class=content><p>I always do silly tests to check what happens when I do something, so just wanted to share it with whoever does silly tests as well and wants to save some time.</p><p>I wanted to know what was exactly the timeout id from <code>setTimeout</code> and what would happen if I saved it on an array. (Wondered basically if it would go <code>null</code> some time, and it doesn't).</p><script src=https://gist.github.com/ghostbar/81cb47ac4a03a6140a40.js></script><script type=text/javascript src=https://asciinema.org/a/32948.js id=asciicast-32948 async></script></div></article></div><!-- end for .row --></div><!-- end for #first-post.container --><div id=featured-posts class=container><div class=row><article class=container><header><h1><a href=/2015/03/26/loggly-as-a-coreos-service>Loggly as a CoreOS service</a></h1><div class=date>March 26, 2015</div></header><div class=content><p>I spent a lot of today figuring out the best way to send the stream of logs from CoreOS to loggly, because it requires structured data and then sending it from a service on systemd.</p><p>So this was my solution for whoever it can work for.</p><script src=https://gist.github.com/ghostbar/f7f2e82884631b083017.js></script></div></article><article class=container><header><h1><a href=/2015/02/27/easy-proxies-with-nodejs>Easy proxies with nodejs</a></h1><div class=date>February 27, 2015</div></header><div class=content><p>Easy ways to get proxies with nodejs/iojs, the way to launch it should be</p><pre><code>URL='http://google.com' PORT=8080 node script.js
</code></pre><h2>Using http-proxy</h2><p>Requires <code>npm install http-proxy</code>.</p><pre><code>var http = require('http');
var httpProxy = require('http-proxy');

var proxy = httpProxy.createProxyServer({target: process.env.URL});

http.createServer(function (req, res) {
  proxy.web(req, res);
}).listen(process.env.PORT || 3000);
</code></pre><h2>Using hapijs</h2><p>Requires <code>npm install hapi</code>.</p><pre><code>var hapi = require('hapi');
var server = new hapi.Server();
server.connection({ port: process.env.PORT || 3000 })

var routes = [{
  method: '*',
  path: '/{p*}',
  config: {
  },
  handler: {
    proxy: {
      host: process.env.URL,
      passThrough: true,
      redirects: 9999
    }
  }
}];

server.route(routes);

server.start(function () {
  console.log('Server running at:', server.info.uri);
});
</code></pre><p>With <code>hapijs</code> it's longer and having just one path to proxy seems like killing an ant with an elephant shotgun, yet I wanted to publish the <code>hapijs</code> way because it's easier to have several proxies in the same server in different paths. If you combine it with <code>catbox</code> you could do a very simple <code>proxy-cache</code> for several URLs, each URL in a different route without spawning several servers.</p></div></article></div><!-- end for .row --></div><!-- end for #featured-posts.container --><div id=next-10-posts class=container><div class=row><section class=twelvecol><h1>More posts</h1><ul><li><h2><span class=date>January 11, 2015</span> <a href=/2015/01/11/recordando-a-aaron-swartz>Recordando a Aaron Swartz</a><h2></h2></h2></li><li><h2><span class=date>January 08, 2015</span> <a href=/2015/01/08/hapi-hiredis-plugin>Published hapi-hiredis on npm</a><h2></h2></h2></li><li><h2><span class=date>January 02, 2015</span> <a href=/2015/01/02/hapi-mongodb2-plugin>Published hapi-mongodb2 on npm</a><h2></h2></h2></li><li><h2><span class=date>December 08, 2014</span> <a href=/2014/12/08/dont-trust-on-file-uploads-with-postman>Don't trust on file uploads with postman</a><h2></h2></h2></li><li><h2><span class=date>December 06, 2014</span> <a href=/2014/12/06/did-you-got-a-ssl-from-godaddy-g2-and-is-not-trusted>Did you got a SSL certificate from GoDaddy, was issued by GoDaddy G2 and now you have issues of non-valid/not-trusted certificate?</a><h2></h2></h2></li><li><h2><span class=date>October 13, 2014</span> <a href=/2014/10/13/irssi-and-tmux-refresh-screen>Irssi and Tmux having refresh issues, quick work-around</a><h2></h2></h2></li><li><h2><span class=date>June 30, 2014</span> <a href=/2014/06/30/vim-clipboard-support-without-x>vim: clipboard support without x</a><h2></h2></h2></li><li><h2><span class=date>June 16, 2014</span> <a href=/2014/06/16/angular-zxcvbn-v1.0.0>angular-zxcvbn v1.0.0</a><h2></h2></h2></li><li><h2><span class=date>May 30, 2014</span> <a href=/2014/05/30/why-my-gpg-does-not-support-hkps>Why my gpg does not support hkps?</a><h2></h2></h2></li><li><h2><span class=date>May 23, 2014</span> <a href=/2014/05/23/parserss-v0.0.1>parserss v0.0.1</a><h2></h2></h2></li></ul><a class=read-more href=/archive.html>See the archive for more posts</a></section></div><!-- end for .row --></div><!-- end for .container --><script src=/js/script.d16b.js></script><!-- Google Analytics: change UA-XXXXX-X to be your site's ID. --><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-1022716-2');ga('send','pageview');</script><div class=clearfix></div><footer id=footer class=container><div class=row><div class="twelvecol last"><small>Â© 2012-2015, Jose Luis Rivas. Built with <a href=http://jekyllrb.com>Jekyll</a> by <a href=http://joseluisrivas.net>Jose Luis Rivas</a>.</small> <small class=pull-right><a href=/feed.xml>RSS</a></small></div><!-- end of .twelvecol --></div><!-- end of .row --></footer></body></html>