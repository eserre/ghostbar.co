<!DOCTYPE HTML><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content=IE-edge><meta name=description content=""><meta name=viewport content="width=device-width, initial-scale=1"><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/img/favicon-apple-57x57.png><link rel=apple-touch-icon sizes=72x72 href=/img/favicon-apple-72x72.png><link rel=apple-touch-icon sizes=114x114 href=/img/favicon-apple-114x114.png><link href="//fonts.googleapis.com/css?family=Source+Code+Pro:300|Lato:300,300italic" rel=stylesheet type=text/css><link rel=stylesheet href=/css/main.8cbe.css><script src=/js/head-scripts.d41d.js></script><title>Homepage &mdash; ghostbar</title></head><body><header id=header class=container><div class=row><div id=logo class=twocol><a href="/"><img src=/img/logo-128x128.b4c1.png></a></div><!-- end of #logo --><div id=title class=sixcol><h1><a href="/">ghostbar</a></h1><p id=tagline>Random thoughts on technology</p></div><!-- end of #title --><div id=menu class=twocol><ul><li><a href=/archive.html>Archive</a></li><li><a href=https://twitter.com/ghostbar>Twitter</a></li><li><a href=https://github.com/ghostbar>GitHub</a></li><li><a href=https://diasp.org/people/3002f1a079ac0132b39800259069449e>Diaspora*</a></li><li><a href=/keys>PGP&OTR keys</a></li></ul></div><!-- end of #menu --></div><!-- end of .row --><div class=clearfix></div></header><!-- end of #header.container --><div id=first-post class=container><div class="row container"><article class=twelvecol><header><h1><a href=/2015/02/27/easy-proxies-with-nodejs>Easy proxies with nodejs</a></h1><div class=date>February 27, 2015</div></header><div class=content><p>Easy ways to get proxies with nodejs/iojs, the way to launch it should be</p><pre><code>URL='http://google.com' PORT=8080 node script.js
</code></pre><h2>Using http-proxy</h2><p>Requires <code>npm install http-proxy</code>.</p><pre><code>var http = require('http');
var httpProxy = require('http-proxy');

var proxy = httpProxy.createProxyServer({target: process.env.URL});

http.createServer(function (req, res) {
  proxy.web(req, res);
}).listen(process.env.PORT || 3000);
</code></pre><h2>Using hapijs</h2><p>Requires <code>npm install hapi</code>.</p><pre><code>var hapi = require('hapi');
var server = new hapi.Server();
server.connection({ port: process.env.PORT || 3000 })

var routes = [{
  method: '*',
  path: '/{p*}',
  config: {
  },
  handler: {
    proxy: {
      host: process.env.URL,
      passThrough: true,
      redirects: 9999
    }
  }
}];

server.route(routes);

server.start(function () {
  console.log('Server running at:', server.info.uri);
});
</code></pre><p>With <code>hapijs</code> it's longer and having just one path to proxy seems like killing an ant with an elephant shotgun, yet I wanted to publish the <code>hapijs</code> way because it's easier to have several proxies in the same server in different paths. If you combine it with <code>catbox</code> you could do a very simple <code>proxy-cache</code> for several URLs, each URL in a different route without spawning several servers.</p></div></article></div><!-- end for .row --></div><!-- end for #first-post.container --><div id=featured-posts class=container><div class=row><article class=container><header><h1><a href=/2015/01/11/recordando-a-aaron-swartz>Recordando a Aaron Swartz</a></h1><div class=date>January 11, 2015</div></header><div class=content><p>Un libro que me encantó es «Homeland» de Cory Doctorow, trata sobre un grupo de hackers que se ven envueltos en situaciones que los deja expuestos a uno de los gobiernos y empresas más poderosas que existen y deben hacer algo aún así los haga correr peligros. Una historia de ficción sobre gente como Aaron Swartz.</p><p>Pero lo mejor del libro, es que precisamente cierra con dos cartas, una por Jacob Appelbaum, uno de los primeros mimbros de Wikileaks y desarrollador del proyecto Tor; y otra por Aaron Swartz. La carta de Aaron la traduje y publico a continuación, espero les sirva de inspiración para que sigan en sus luchas aún cuando a veces parezca que quién da la batalla del otro lado es muy grande e invencible:</p><blockquote><p>Hola, soy Aaron. Se me ha dado este pequeño espacio aquí al final del libro porque soy un humano de carne y hueso, y cómo tal, puedo decirte algo que no creerías si viniese de la boca de cualquiera de esos carácteres ficticios:</p><p>Esto es real.</p><p>Claro, no hay alguien llamado Marcus o Ange realmente, al menos no que yo conozca, pero sí sé de gente real justo como ellos. Si quieres, puedes ir a San Francisco y conocerlos. Y mientras estás allí, puedes jugar D&amp;D con John Gilmore o construir un cohete en Noisebridge o trabajar con algunos hippies en un proyecto de arte para Burning Man.</p><p>Y si algo de las cosas más relacionadas con conspiraciones en el libro te parecen demasiado alocadas para ser verdad, bueno, simplemente <em>googlea</em> Blackwater, Xe o BlueCoat. (Yo mismo tengo una solicitud FOIA pendiente para saber más de "software para manejo de persona", pero los federales dicen que les va a tomar tres <em>años</em> más redactar todos los documentos relevantes.)</p><p>Ahora, yo espero que te hayas divertido quedándote despierto toda la noche leyendo acerca de estas cosas, pero la parte que viene es importante así que presta atención: lo que está pasando ahora no es algún reality show de televisión donde simplemente puedes sentarte en casa y ver.</p><p>Esta es tu vida, este es tú país -- y se quieres mantenerlo seguro, debes involucrarte.</p><p>Sé que es fácil sentirse sin poder, como si no hubiese algo que puedas hacer para que baje la marcha o detener "el sistema." Como si todos los hilos son movidos por fuerzas oscuras y poderosas lejanas a tu control. Yo me siento de esa forma también, a veces. Pero simplemente no es verdad.</p><p>Hace menos de un año, un amigo me llamó para decirme sobre un proyecto de ley oscuro del cuál había escuchado llamado <em>Acta para Combatir la Vulneración En Línea y La Falsificación</em> o <em>COICA</em> (En Inglés es: <em>Combatting Online Infringement and Counterfeitting Act</em>, de allí la abreviación <em>COICA</em>). Mientras leía el proyecto empecé a preocuparme más y más: bajo estas provisiones, el gobierno podría censurar sitios web que no le gusten sin algo como un juicio. Sería la primera vez que el gobierno de los EEUU se le darían poderes para censurar el acceso a la red.</p><p>El proyecto había sido introducido hace un día o dos, pero ya tenía un par de docenas de senadores apoyándola. Y, a pesar de nunca haber un debate ya estaba siendo programada para ser votada en sólo un par de días. Nadie había reportado al respecto y ése era justamente el punto: ellos querían apurar esta cosa para que pasara antes que alguien se diese cuenta.</p><p>Afortunadamente, mi amigo se dió cuenta. Nos quedamos despiertos todo el fin de semana y lanzamos un sitio web explicando qué decía el proyecto de ley, con una petición que podías firmar en rechazo al proyecto que te daría números de teléfonos para llamar a tus representantes en el senado. Le dijimos al respecto a algunos amigos y ellos le dijeron a algunos de sus amigos y en cuestión de un par de días teníamos más de 200 mil personas en nuestra petición. Fue increíble.</p><p>Bueno, la gente promoviendo esta ley no paró. Ellos gastaron literalmente decenas de millones de dólares haciendo lobby para éste proyecto de ley. La cabeza de cada compañía de medios grandes voló a Washington, D.C. y allí se reunieron con el jefe de personal del presidente y amablemente le recordaron de los millones de dólares que le habían donado a la campaña del presidente y le explicaron cómo lo que ellos querían -- la única cosa que querían -- era que esta ley se aprobara.</p><p>Pero la presión pública siguió creciendo. Para intentar sacar a la gente del camino ellos intentaron cambiando el nombre de la ley -- llamándola PIPA y SOPA, incluso llamándola E-PARASITES Act -- pero no importó cómo la llamaron, más y más personas se siguieron diciéndole a sus amigos sobre la ley y consiguiendo más y más personas que se opusieran. Pronto, las firmas en nuestra petición iba en millones.</p><p>Logramos detenerlos por más de un año con diferentes tácticas, pero se dieron cuenta que si esperaban más quizás nunca lograrían tener un chance de pasar esta ley. Así que programaron un voto apenas volviesen de la pausa de invierno.</p><p>Pero mientras los miembros del congreso estaban fuera en la pausa de invierno, manteniendo reuniones públicas y en las salas de sus pueblos en casa, la gente empezó a visitarlos. En todo el país, miembros del congreso empezaron a ser cuestionados por sus electores acerca de su apoyo a esa sucia ley de censura del internet. Y los miembros del congreso empezaron a asustarse -- algunos llegando tan lejos como responderles <em>atacandome</em>.</p><p>Pero esto ya no se trataba de mi -- nunca se trató de mi. Desde el principio fue sobre ciudadanos tomando las cosas en sus propias manos: haciendo vídeos en YouTube y escribiendo canciones oponiéndose a la ley, haciendo gráficos mostrando cuánto dinero los promotores de la ley habían recibido de las industrias promoviéndola, y organizando boycotts poniéndo presión en las compañías que habían promovido la ley.</p><p>Y funcionó -- tomó la ley desde un punto político sin problema alguno que se suponía debía pasar unánimamente a una posición más parecida a tener un balón tóxico que nadie quería tocar. ¡Incluso los promotores de la ley empezaron a sacar declaraciones oponiéndose a la ley! Oh sí, esos dueños de medios estaban molestos...</p><p>Así no es como se supone que el sistema deba funcionar. ¡Un montón de chicos no detienen unas de las fuerzas más poderosas en Washington simplemente escribiendo en sus portátiles!</p><p>Pero pasó. Y tú puedes hacer que pase de nuevo.</p><p>El sistema está cambiando. Gracias a la Internet, todos los días personas pueden saber acerca de cosas y organizarse incluso si el sistema está determinado a ignorarlo. Ahora, quizás no ganes todo el tiempo -- esto es la vida real, después de todo -- pero finalmente tenemos una oportunidad.</p><p>Pero sólo funciona si tú tomas parte en ello. Y ahora que has leído este libro y aprendido cómo hacerlo, estas perfectamente informado sobre cómo hacerlo de nuevo. Es correcto: ahora depende de ti cambiar el sistema.</p><p>Aaron Swartz.</p></blockquote></div></article><article class=container><header><h1><a href=/2015/01/08/hapi-hiredis-plugin>Published hapi-hiredis on npm</a></h1><div class=date>January 08, 2015</div></header><div class=content><p>I just published to <a href="https://www.npmjs.com/"><code>npm</code></a> the module <a href=https://www.npmjs.com/package/hapi-hiredis><code>hapi-hiredis</code></a>. This plugin for <a href=http://hapijs.com><code>hapi</code></a> is fully compatible with 8.0 (and actually expects it).</p><p>The difference between this plugin and <a href=https://www.npmjs.com/package/hapi-redis><code>hapi-redis</code></a> is that this module uses the <code>hiredis</code> parser based on <code>C++</code> bindings, <code>redis</code> uses a slower <code>javascript</code> parser. Besides that main difference this plugin supports <code>URL</code>s for giving the connection, instead <code>hapi-redis</code> only supports giving the connection parameters via separate <code>host</code>, <code>port</code> and <code>password</code> fields.</p><p>Using it is very simple, after registering the usual way as any other plugin then you can get it from the context on handlers and extensions as <code>this.redis</code> or get it from <code>server.plugins['hapi-hiredis].client</code>.</p></div></article></div><!-- end for .row --></div><!-- end for #featured-posts.container --><div id=next-10-posts class=container><div class=row><section class=twelvecol><h1>More posts</h1><ul><li><h2><span class=date>January 03, 2015</span> <a href=/2015/01/03/hapi-mongodb2-plugin>Published hapi-mongodb2 on npm</a><h2></h2></h2></li><li><h2><span class=date>December 08, 2014</span> <a href=/2014/12/08/dont-trust-on-file-uploads-with-postman>Don't trust on file uploads with postman</a><h2></h2></h2></li><li><h2><span class=date>December 06, 2014</span> <a href=/2014/12/06/did-you-got-a-ssl-from-godaddy-g2-and-is-not-trusted>Did you got a SSL certificate from GoDaddy, was issued by GoDaddy G2 and now you have issues of non-valid/not-trusted certificate?</a><h2></h2></h2></li><li><h2><span class=date>October 13, 2014</span> <a href=/2014/10/13/irssi-and-tmux-refresh-screen>Irssi and Tmux having refresh issues, quick work-around</a><h2></h2></h2></li><li><h2><span class=date>June 30, 2014</span> <a href=/2014/06/30/vim-clipboard-support-without-x>vim: clipboard support without x</a><h2></h2></h2></li><li><h2><span class=date>June 16, 2014</span> <a href=/2014/06/16/angular-zxcvbn-v1.0.0>angular-zxcvbn v1.0.0</a><h2></h2></h2></li><li><h2><span class=date>May 30, 2014</span> <a href=/2014/05/30/why-my-gpg-does-not-support-hkps>Why my gpg does not support hkps?</a><h2></h2></h2></li><li><h2><span class=date>May 23, 2014</span> <a href=/2014/05/23/parserss-v0.0.1>parserss v0.0.1</a><h2></h2></h2></li><li><h2><span class=date>May 18, 2014</span> <a href=/2014/05/18/framework-challenge-bogodev>Framework Challenge Bogodev 2014</a><h2></h2></h2></li><li><h2><span class=date>May 16, 2014</span> <a href=/2014/05/16/using-angular-file-uploader-together-with-angular-file-model>Using angular-file-uploader and angular-file-model together</a><h2></h2></h2></li></ul><a class=read-more href=/archive.html>See the archive for more posts</a></section></div><!-- end for .row --></div><!-- end for .container --><script src=/js/script.d16b.js></script><!-- Google Analytics: change UA-XXXXX-X to be your site's ID. --><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-1022716-2');ga('send','pageview');</script><div class=clearfix></div><footer id=footer class=container><div class=row><div class="twelvecol last"><small>© 2012-2015, Jose Luis Rivas. Built with <a href=http://jekyllrb.com>Jekyll</a> by <a href=http://joseluisrivas.net>Jose Luis Rivas</a>.</small> <small class=pull-right><a href=/feed.xml>RSS</a></small></div><!-- end of .twelvecol --></div><!-- end of .row --></footer></body></html>